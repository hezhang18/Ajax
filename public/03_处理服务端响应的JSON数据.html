<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        /* 

            在真实项目中，服务器端大多数情况下会以 JSON 对象作为响应数据格式。当客户端拿到响应数据时，
            要将 JSON 数据和 HTML 字符串进行拼接，然后将拼接的结果展示在页面中。

            在 HTTP 请求与响应的过程中，无论是请求参数还是响应内容，如果是对象类型，最终都会被转换为
            对象字符串进行传输。
        
        */


        // 1. 创建 Ajax 对象
        let xhr = new XMLHttpRequest();

        // 2. 指定 Ajax 发送请求的方式与路径。参数 1: 请求方法；参数 2: 请求路径。
        xhr.open('get', 'http://localhost:3000/jsonGet');

        // 3. 发送请求
        xhr.send();

        // 4. 获取服务器响应到客户端的数据
        xhr.onload = function(){
            // console.log(xhr.responseText);
            // console.log(typeof xhr.responseText); // string

            // 将 JSON 字符串转换为 JSON 对象
            let responseText = JSON.parse(xhr.responseText);
            console.log(responseText);

            let str = '<h1>' + responseText.name + '</h1>';
            document.body.innerHTML = str;
        }
    </script>
</body>
</html>