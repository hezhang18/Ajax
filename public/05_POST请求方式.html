<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <p>
        <input type="text" id="username">
    </p>
    <p>
        <input type="text" id="age">
    </p>
    <p>
        <input type="button" value="提交" id="btn">
    </p>
    <script>
        /* 
            
            POST 请求方式：
            
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send('name=Jeff&age=20');
        
        */

        window.onload = function(){
            let btn = document.getElementById('btn');
            let username = document.getElementById('username');
            let age = document.getElementById('age');

            btn.onclick = function(){
                let nameValue = username.value;
                let ageValue = age.value;
                let params = 'username=' + nameValue + '&age=' + ageValue;
                
                // 1. 创建 Ajax 对象
                let xhr = new XMLHttpRequest();

                // 2. 指定 Ajax 发送请求的方式与路径。参数 1: 请求方法；参数 2: 请求路径。
                xhr.open('post', 'http://localhost:3000/post');

                // 3. 设置请求参数格式的类型（POST 请求必须要设置）
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

                // 4. 发送请求
                xhr.send(params);

                // 5. 获取服务器响应到客户端的数据
                xhr.onload = function(){
                    console.log(xhr.responseText);
                }
            }
        }
    </script>
</body>
</html>